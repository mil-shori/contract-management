# AIã‚µãƒ¼ãƒ“ã‚¹ (Python Cloud Functions)

å¥‘ç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ç”¨ã®AIåˆ†æã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚OpenAI GPT-4ã‚’ä½¿ç”¨ã—ã¦å¥‘ç´„æ›¸ã®è¦ç´„ã€ãƒªã‚¹ã‚¯åˆ†æã€ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã€é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡ºã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ“‹ æ©Ÿèƒ½æ¦‚è¦

### ä¸»è¦æ©Ÿèƒ½
- **å¥‘ç´„æ›¸è¦ç´„**: GPT-4ã«ã‚ˆã‚‹åŒ…æ‹¬çš„ãªå¥‘ç´„å†…å®¹è¦ç´„ç”Ÿæˆ
- **ãƒªã‚¹ã‚¯åˆ†æ**: æ³•çš„ãƒ»è²¡å‹™ãƒ»é‹ç”¨ãƒªã‚¹ã‚¯ã®è‡ªå‹•åˆ¤å®šã¨æ”¹å–„ææ¡ˆ
- **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**: å¥‘ç´„æ›¸å†…å®¹ã¸ã®è‡ªç„¶è¨€èªã§ã®è³ªå•å¿œç­”
- **é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º**: å¥‘ç´„æ›¸ã‹ã‚‰ä¸»è¦æ¡é …ã‚„æ³¨æ„ç‚¹ã‚’è‡ªå‹•æŠ½å‡º
- **ã‚³ã‚¹ãƒˆç®¡ç†**: ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã¨APIåˆ©ç”¨ã‚³ã‚¹ãƒˆã®è¿½è·¡
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã®ä½¿ç”¨é‡åˆ¶é™ã¨ã‚¹ãƒ‘ãƒ é˜²æ­¢

### AIæ©Ÿèƒ½è©³ç´°
- **è¦ç´„ç”Ÿæˆ**: å¥‘ç´„ã®ç›®çš„ã€æ¡é …ã€é‡‘é¡ã€æœŸé–“ã€ãƒªã‚¹ã‚¯ã‚’æ§‹é€ åŒ–ã—ã¦è¦ç´„
- **ãƒªã‚¹ã‚¯è©•ä¾¡**: ä½ãƒ»ä¸­ãƒ»é«˜ã®3æ®µéšã§ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ã‚’åˆ¤å®šã€å…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’æç¤º
- **å¯¾è©±åˆ†æ**: å¥‘ç´„æ›¸ã®å†…å®¹ã«ã¤ã„ã¦å°‚é–€çš„ãªè³ªå•å¿œç­”ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒ
- **ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º**: æ¨©åˆ©ç¾©å‹™ã€é‡‘é¡ã€æœŸé–“ã€ãƒªã‚¹ã‚¯ã€ç‰¹è¨˜äº‹é …ã‚’åˆ†é¡ã—ã¦æŠ½å‡º

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### AIãƒ»MLé–¢é€£
- **OpenAI GPT-4**: ä¸»è¦ãªAIæ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³
- **LangChain**: AI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **tiktoken**: ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¨ˆç®—ã¨ã‚³ã‚¹ãƒˆç®¡ç†
- **spaCy**: è‡ªç„¶è¨€èªå‡¦ç†ï¼ˆè‹±èªãƒ»æ—¥æœ¬èªï¼‰
- **transformers**: äº‹å‰å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«

### æ—¥æœ¬èªå‡¦ç†
- **Janome**: æ—¥æœ¬èªå½¢æ…‹ç´ è§£æ
- **MeCab**: é«˜ç²¾åº¦æ—¥æœ¬èªè§£æï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **SudachiPy**: æ—¥æœ¬èªæ­£è¦åŒ–ãƒ»åˆ†å‰²

### ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Firebase Admin SDK**: Firestoreé€£æº
- **Google Cloud Storage**: ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- **Google Cloud Functions**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å®Ÿè¡Œç’°å¢ƒ

### Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Functions Framework**: Google Cloud Functionså¯¾å¿œ
- **Flask**: HTTP APIã‚µãƒ¼ãƒãƒ¼
- **Flask-CORS**: CORSå¯¾å¿œ

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
functions-ai/
â”œâ”€â”€ main.py              # ãƒ¡ã‚¤ãƒ³AIã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ requirements.txt     # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ Dockerfile          # ã‚³ãƒ³ãƒ†ãƒŠè¨­å®š
â”œâ”€â”€ .gcloudignore       # ãƒ‡ãƒ—ãƒ­ã‚¤é™¤å¤–è¨­å®š
â”œâ”€â”€ test_ai.py          # ç·åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ README.md           # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿè¡Œ

### 1. ç’°å¢ƒæº–å‚™

```bash
# Pythonä»®æƒ³ç’°å¢ƒä½œæˆ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# spaCyãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
python -m spacy download en_core_web_sm
python -m spacy download ja_core_news_sm
```

### 2. OpenAI APIè¨­å®š

```bash
# OpenAI APIã‚­ãƒ¼å–å¾—ãƒ»è¨­å®š
export OPENAI_API_KEY="your-openai-api-key-here"

# ã¾ãŸã¯.envãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰
echo "OPENAI_API_KEY=your-openai-api-key-here" > .env
```

### 3. Google Cloudè¨­å®š

```bash
# Google Cloud SDKèªè¨¼
gcloud auth login
gcloud config set project YOUR_PROJECT_ID

# Firebase Admin SDKèªè¨¼
export GOOGLE_APPLICATION_CREDENTIALS="path/to/service-account-key.json"
```

### 4. ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

```bash
# AIã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python main.py

# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python test_ai.py
```

### 5. Firebase ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
firebase deploy --only functions:ai
```

## ğŸ“¡ APIä»•æ§˜

### å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼
```
Content-Type: application/json
Authorization: Bearer {firebase_token}
```

### 1. å¥‘ç´„æ›¸è¦ç´„ - `/summarize`

**Method:** POST

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```json
{
  "contract_text": "å¥‘ç´„æ›¸ã®å…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ...",
  "user_id": "user123"
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "summary": "å¥‘ç´„æ›¸ã®åŒ…æ‹¬çš„ãªè¦ç´„...",
  "metadata": {
    "processing_time": 3.45,
    "tokens_used": 1250,
    "cost": 0.0375,
    "model": "gpt-4",
    "timestamp": "2024-01-15T10:30:00Z"
  },
  "result_id": "summary_abc123"
}
```

### 2. ãƒªã‚¹ã‚¯åˆ†æ - `/analyze-risk`

**Method:** POST

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```json
{
  "contract_text": "å¥‘ç´„æ›¸ã®å…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ...",
  "user_id": "user123"
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "risk_analysis": {
    "overall_risk_level": "ä¸­",
    "risk_score": 65,
    "risk_factors": [
      {
        "category": "æ³•çš„ãƒªã‚¹ã‚¯",
        "severity": "ä¸­",
        "description": "è§£é™¤æ¡ä»¶ãŒä¸€æ–¹çš„ã§ä¸åˆ©...",
        "recommendation": "åŒæ–¹ã®åˆæ„ã«ã‚ˆã‚‹è§£é™¤æ¡é …ã‚’è¿½åŠ "
      }
    ],
    "summary": "ç·åˆçš„ãªãƒªã‚¹ã‚¯è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ"
  },
  "metadata": {
    "processing_time": 4.20,
    "tokens_used": 1850,
    "cost": 0.0555,
    "model": "gpt-4",
    "timestamp": "2024-01-15T10:35:00Z"
  },
  "result_id": "risk_def456"
}
```

### 3. ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ - `/chat`

**Method:** POST

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```json
{
  "contract_text": "å¥‘ç´„æ›¸ã®å…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ...",
  "question": "ã“ã®å¥‘ç´„ã®å ±é…¬ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ",
  "chat_history": [
    {
      "role": "user",
      "content": "å‰ã®è³ªå•...",
      "timestamp": "2024-01-15T10:25:00Z"
    },
    {
      "role": "assistant", 
      "content": "å‰ã®å›ç­”...",
      "timestamp": "2024-01-15T10:25:30Z"
    }
  ],
  "user_id": "user123"
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "answer": "å¥‘ç´„æ›¸ã«ã‚ˆã‚‹ã¨ã€åŸºæœ¬å ±é…¬ã¯æœˆé¡800,000å††ï¼ˆç¨åˆ¥ï¼‰ã§ã€æˆæœå ±é…¬ã¨ã—ã¦...",
  "metadata": {
    "processing_time": 2.15,
    "tokens_used": 890,
    "cost": 0.0267,
    "model": "gpt-4",
    "timestamp": "2024-01-15T10:40:00Z"
  },
  "session_id": "chat_session_789",
  "updated_history": [
    // æ›´æ–°ã•ã‚ŒãŸãƒãƒ£ãƒƒãƒˆå±¥æ­´
  ]
}
```

### 4. é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º - `/extract-key-points`

**Method:** POST

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```json
{
  "contract_text": "å¥‘ç´„æ›¸ã®å…¨æ–‡ãƒ†ã‚­ã‚¹ãƒˆ...",
  "user_id": "user123"
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "key_points": {
    "key_points": [
      {
        "category": "é‡‘é¡",
        "title": "åŸºæœ¬å ±é…¬",
        "content": "æœˆé¡800,000å††ï¼ˆç¨åˆ¥ï¼‰",
        "importance": "é«˜",
        "page_reference": "ç¬¬3æ¡"
      },
      {
        "category": "æœŸé–“",
        "title": "å¥‘ç´„æœŸé–“",
        "content": "2024å¹´1æœˆ15æ—¥ã‹ã‚‰2024å¹´6æœˆ30æ—¥ã¾ã§",
        "importance": "é«˜",
        "page_reference": "ç¬¬4æ¡"
      }
    ],
    "summary": "æœ¬å¥‘ç´„ã¯æ¥­å‹™å§”è¨—å¥‘ç´„ã§ã€ä¸»è¦ãªãƒã‚¤ãƒ³ãƒˆã¯..."
  },
  "metadata": {
    "processing_time": 3.80,
    "tokens_used": 1420,
    "cost": 0.0426,
    "model": "gpt-4",
    "timestamp": "2024-01-15T10:45:00Z"
  },
  "result_id": "keypoints_ghi789"
}
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python test_ai.py

# ç‰¹å®šã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
python -c "from test_ai import test_summarize; test_summarize()"
python -c "from test_ai import test_risk_analysis; test_risk_analysis()"
python -c "from test_ai import test_chat; test_chat()"
```

### ãƒ†ã‚¹ãƒˆé …ç›®
- **ã‚µãƒ¼ãƒãƒ¼ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯**: AIã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª
- **è¦ç´„ç”Ÿæˆãƒ†ã‚¹ãƒˆ**: ã‚µãƒ³ãƒ—ãƒ«å¥‘ç´„æ›¸ã§ã®è¦ç´„å“è³ªç¢ºèª
- **ãƒªã‚¹ã‚¯åˆ†æãƒ†ã‚¹ãƒˆ**: ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«åˆ¤å®šç²¾åº¦ç¢ºèª
- **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**: è³ªå•å¿œç­”ã®é©åˆ‡æ€§ç¢ºèª
- **é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡ºãƒ†ã‚¹ãƒˆ**: æƒ…å ±æŠ½å‡ºã®æ­£ç¢ºæ€§ç¢ºèª
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: å„API ã®å¿œç­”æ™‚é–“æ¸¬å®š
- **ãƒ­ãƒ¼ã‚«ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**: ãƒˆãƒ¼ã‚¯ãƒ³ã‚«ã‚¦ãƒ³ãƒˆã€ã‚³ã‚¹ãƒˆè¨ˆç®—ç­‰

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆç”¨cURL

#### è¦ç´„ç”Ÿæˆ
```bash
curl -X POST http://localhost:8081/summarize \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer test_token" \
  -d '{
    "contract_text": "å¥‘ç´„æ›¸ã®å†…å®¹...",
    "user_id": "test_user"
  }'
```

#### ãƒªã‚¹ã‚¯åˆ†æ
```bash
curl -X POST http://localhost:8081/analyze-risk \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer test_token" \
  -d '{
    "contract_text": "å¥‘ç´„æ›¸ã®å†…å®¹...",
    "user_id": "test_user"
  }'
```

## âš™ï¸ è¨­å®šãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ç’°å¢ƒå¤‰æ•°
- `OPENAI_API_KEY`: OpenAI APIã‚­ãƒ¼ï¼ˆå¿…é ˆï¼‰
- `GOOGLE_APPLICATION_CREDENTIALS`: GCP ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼
- `GOOGLE_CLOUD_PROJECT`: GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
- `PORT`: ã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 8081ï¼‰

### AIãƒ¢ãƒ‡ãƒ«è¨­å®š
```python
# main.pyå†…ã§å¤‰æ›´å¯èƒ½
self.openai_client = ChatOpenAI(
    model_name="gpt-4-1106-preview",  # ãƒ¢ãƒ‡ãƒ«æŒ‡å®š
    temperature=0.3,                   # å‰µé€ æ€§ãƒ¬ãƒ™ãƒ«
    max_tokens=2000,                   # æœ€å¤§å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
    openai_api_key=os.getenv('OPENAI_API_KEY')
)
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­å®š
- **1åˆ†é–“åˆ¶é™**: 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **1æ—¥åˆ¶é™**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **åˆ¶é™ã¯ main.py ã® `_validate_rate_limit()` ã§å¤‰æ›´å¯èƒ½**

### ã‚³ã‚¹ãƒˆè¨­å®š
```python
# GPT-4æ–™é‡‘ï¼ˆ2024å¹´1æœˆæ™‚ç‚¹ï¼‰
prompt_cost = prompt_tokens * 0.00003    # $0.03/1K tokens
completion_cost = completion_tokens * 0.00006  # $0.06/1K tokens
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. OpenAI APIèªè¨¼ã‚¨ãƒ©ãƒ¼
```
Error: OpenAI API authentication failed
```
**è§£æ±ºæ–¹æ³•:**
- APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- OpenAIã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èª²é‡‘è¨­å®šã‚’ç¢ºèª
- APIã‚­ãƒ¼ã®æ¨©é™è¨­å®šã‚’ç¢ºèª

#### 2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼
```
Error: Rate limit exceeded
```
**è§£æ±ºæ–¹æ³•:**
- 1åˆ†é–“ã«10å›ä»¥ä¸Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ã„ãªã„ã‹ç¢ºèª
- 1æ—¥ã«100å›ä»¥ä¸Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ã„ãªã„ã‹ç¢ºèª
- Firestoreã®user_ai_usageã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢

#### 3. æ—¥æœ¬èªå‡¦ç†ã‚¨ãƒ©ãƒ¼
```
Error: Japanese text processing failed
```
**è§£æ±ºæ–¹æ³•:**
- spaCyã®æ—¥æœ¬èªãƒ¢ãƒ‡ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```bash
python -m spacy download ja_core_news_sm
```
- JanomeãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### 4. ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼
```
Error: Memory allocation failed
```
**è§£æ±ºæ–¹æ³•:**
- å¤§ããªå¥‘ç´„æ›¸ã¯åˆ†å‰²ã—ã¦å‡¦ç†
- Cloud Functionsã®ãƒ¡ãƒ¢ãƒªè¨­å®šã‚’å¢—åŠ 
- ä¸è¦ãªãƒ¢ãƒ‡ãƒ«ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰

### ãƒ­ã‚°ç¢ºèª
```bash
# Cloud Functions ãƒ­ã‚°
gcloud functions logs read summarize --limit 100
gcloud functions logs read analyze-risk --limit 100

# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ­ã‚°
tail -f /var/log/ai-service.log
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»åˆ¶é™

### å‡¦ç†æ™‚é–“ç›®å®‰
- **è¦ç´„ç”Ÿæˆ**: 3-8ç§’
- **ãƒªã‚¹ã‚¯åˆ†æ**: 4-10ç§’
- **ãƒãƒ£ãƒƒãƒˆå¿œç­”**: 2-6ç§’
- **é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º**: 3-8ç§’

### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡
- **ãƒ¡ãƒ¢ãƒª**: 1GB-2GB
- **CPU**: 1-2vCPU
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: OpenAI APIå‘¼ã³å‡ºã—æ™‚ã®ã¿

### ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™
- **æœ€å¤§å…¥åŠ›**: ç´„32,000ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆGPT-4ï¼‰
- **æœ€å¤§å‡ºåŠ›**: 2,000ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆè¨­å®šå¯å¤‰ï¼‰
- **1æ—¥ã®æ¨å¥¨ä¸Šé™**: 100,000ãƒˆãƒ¼ã‚¯ãƒ³/ãƒ¦ãƒ¼ã‚¶ãƒ¼

### ã‚³ã‚¹ãƒˆç›®å®‰ï¼ˆGPT-4ä½¿ç”¨æ™‚ï¼‰
- **è¦ç´„ç”Ÿæˆ**: $0.03-0.08/å›
- **ãƒªã‚¹ã‚¯åˆ†æ**: $0.04-0.10/å›
- **ãƒãƒ£ãƒƒãƒˆ**: $0.02-0.06/å›
- **é‡è¦ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º**: $0.03-0.08/å›

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- å¥‘ç´„æ›¸ãƒ‡ãƒ¼ã‚¿ã¯OpenAIã«é€ä¿¡ï¼ˆOpenAIã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«æº–æ‹ ï¼‰
- å‡¦ç†å¾Œã®ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•å‰Šé™¤ï¼ˆãƒ­ã‚°ãƒ»å±¥æ­´é™¤ãï¼‰
- å€‹äººæƒ…å ±ã®åŒ¿ååŒ–æ¨å¥¨

### APIã‚­ãƒ¼ç®¡ç†
- ç’°å¢ƒå¤‰æ•°ã§ã®å®‰å…¨ãªç®¡ç†
- ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¨å¥¨ï¼ˆæœˆ1å›ï¼‰
- ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®ç›£è¦–

### ä½¿ç”¨é‡ç›£è¦–
- Firestoreã§ã®ä½¿ç”¨é‡è¿½è·¡
- ç•°å¸¸ä½¿ç”¨ã®æ¤œå‡ºãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ
- ã‚³ã‚¹ãƒˆä¸Šé™ã®è¨­å®šæ¨å¥¨

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [OpenAI API Documentation](https://platform.openai.com/docs)
- [LangChain Documentation](https://python.langchain.com/)
- [Firebase Functions Python](https://firebase.google.com/docs/functions/python)
- [å¥‘ç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸](../docs/00-firebase-setup-guide.md)
- [OCR ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…](../functions-python/README.md)

## ğŸ“ˆ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

- **å¤šè¨€èªå¯¾å¿œ**: ä¸­å›½èªã€éŸ“å›½èªã§ã®å¥‘ç´„æ›¸åˆ†æ
- **æ¥­ç•Œç‰¹åŒ–**: ç‰¹å®šæ¥­ç•Œå‘ã‘ã®å°‚é–€åˆ†ææ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ**: WebSocketã§ã®é€²æ—è¡¨ç¤º
- **é«˜åº¦ãªåˆ†æ**: å¥‘ç´„æ›¸æ¯”è¼ƒã€å¤‰æ›´ç‚¹æ¤œå‡º
- **APIçµ±åˆ**: å¤–éƒ¨æ³•å‹™ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº
- **ãƒãƒƒãƒå‡¦ç†**: è¤‡æ•°å¥‘ç´„æ›¸ã®ä¸€æ‹¬åˆ†æ
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®åˆ†æãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ